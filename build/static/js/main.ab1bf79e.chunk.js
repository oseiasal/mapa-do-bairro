(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,n){e.exports=n(18)},15:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),i=n(9),r=n.n(i),s=(n(15),n(1)),c=n(2),l=n(5),d=n(3),u=n(4),p=n(6),m=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return a.a.createElement("main",null,a.a.createElement("div",{id:"map",role:"application","aria-label":"Mapa da Cidade de Guarulhos",className:"map"}))}}]),t}(a.a.Component),f=function(e){function t(){var e,n;Object(s.a)(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).callOpenInfoWindow=function(e){n.props.openInfoWindow(n.props.marker,n.props.infoWindow,n.props.marker.map)},n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return a.a.createElement("li",{role:"button",tabIndex:"0",onClick:this.callOpenInfoWindow.bind(this),onKeyPress:this.callOpenInfoWindow.bind(this)},this.props.marker.title)}}]),t}(a.a.Component),h=(n(8),function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"menu-option"},a.a.createElement("div",{className:"search-container"},a.a.createElement("div",{tabIndex:"0",className:"menuToggle",onKeyPress:this.props.openMenu},a.a.createElement("input",{tabIndex:"-1",className:"checkbox",type:"checkbox"}),a.a.createElement("span",null),a.a.createElement("span",null),a.a.createElement("span",null),a.a.createElement("div",null)),a.a.createElement("input",{"aria-label":"Digite o nome do lugar",placeholder:"Digite o nome do lugar",className:"show-markers showing",type:"text",onChange:function(t){e.props.updateQuery(t.target.value)}}),a.a.createElement("div",{className:"list showing"},a.a.createElement("ul",null,this.props.query.length>0?this.props.marcFiltered.map(function(t,n){return a.a.createElement(f,{infoWindow:e.props.infoWindow,key:n,marker:t,openInfoWindow:e.props.openInfoWindow})}):this.props.markers.map(function(t,n){return a.a.createElement(f,{infoWindow:e.props.infoWindow,key:n,marker:t,openInfoWindow:e.props.openInfoWindow})})))))}}]),t}(a.a.Component)),v=[{title:"CIEE",location:{lat:-23.467149,lng:-46.527667},id:"4f47974ce4b0683d4e7d87cf"},{title:"Maria Cereja",location:{lat:-23.4610524,lng:-46.5302547},id:"4b2ee880f964a52023e824e3"},{title:"Bosque Maia",location:{lat:-23.4575191,lng:-46.5298792},id:"4bb2aec24019a5937f3637b8"},{title:"Wow Burger",location:{lat:-23.4577258,lng:-46.5302654},id:"4b2ed079f964a52009e724e3"},{title:"Winners Academia",location:{lat:-23.4599304,lng:-46.536059},id:"4d7b98e96152b60cdc578126"},{title:"ACM",location:{lat:-23.4635817,lng:-46.5338167},id:"4c7c43107a856dcbb7cde1a7"}],w=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e))).initMap=function(){document.getElementsByClassName("checkbox")[0].addEventListener("click",function(){document.getElementsByClassName("list")[0].classList.toggle("showing"),document.getElementsByClassName("show-markers")[0].classList.toggle("showing")});var e=Object(p.a)(Object(p.a)(n)),t=new window.google.maps.InfoWindow;n.setState({infoWindow:t});var o=new window.google.maps.Map(document.getElementById("map"),{center:{lat:-23.4671489,lng:-46.5276668},zoom:15,mapTypeControl:!1});n.setState({map:o});for(var a=new window.google.maps.LatLngBounds,i=0;i<n.state.locations.length;i++){var r=n.state.locations[i].location,s=n.state.locations[i].title,c=n.state.locations[i].id,l=new window.google.maps.Marker({squareId:c,map:o,position:r,title:s,animation:window.google.maps.Animation.DROP,id:i});l.addListener("click",function(){e.openInfoWindow(this,e.state.infoWindow,this.map)}),n.state.markers.push(l),n.setState({}),a.extend(n.state.markers[i].position)}},n.updateQuery=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=Object(p.a)(Object(p.a)(n));n.setState({query:e}),n.state.markers.filter(function(t){return t.title.toLowerCase().indexOf(e.toLowerCase())>-1}).map(function(e){return t.push(e)}),void 0==t?console.log("N\xe3o encontrado"):console.log("definido"),n.setState({marcFiltered:t}),setTimeout(function(){o.renderMarkers(o.state.map,o.state.marcFiltered,o.state.query)},50),n.state.markers.map(function(e){return e.setMap(null)})},n.state={locations:v,map:{},markers:[],query:"",infoWindow:""},n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){window.initMap=this.initMap,this.createScript("https://maps.googleapis.com/maps/api/js?key=AIzaSyDVOph5H2ON8d7d3maVA_t9UkTTxkRhuZA&callback=initMap")}},{key:"openMenu",value:function(){document.getElementsByClassName("list")[0].classList.toggle("showing"),document.getElementsByClassName("show-markers")[0].classList.toggle("showing")}},{key:"renderMarkers",value:function(e,t,n){setTimeout(function(){0==n.length&&t.map(function(t){return t.setMap(e)})},10),t.map(function(o){if(o.title!==n.toLowerCase().indexOf(n.toLowerCase())>-1)return t.map(function(t){return t.setMap(e)})})}},{key:"render",value:function(){return a.a.createElement("div",{className:"container"},a.a.createElement("header",{className:"header"}," Mapa do Bairro "),a.a.createElement("nav",null,a.a.createElement(h,{openMenu:this.openMenu.bind(this),query:this.state.query,marcFiltered:this.state.marcFiltered,updateQuery:this.updateQuery.bind(this),openInfoWindow:this.openInfoWindow.bind(this),infoWindow:this.state.infoWindow,markers:this.state.markers,map:this.state.map})),a.a.createElement(m,null))}},{key:"openInfoWindow",value:function(e,t,n){t.marker!==e&&(t.marker=e,t.setContent("<div>"+e.title+"</div>"),t.open(n,e),this.state.map.setCenter(e.getPosition()),this.state.map.panBy(0,30),t.addListener("closeclick",function(){t.setMarker=null}),this.chamaApiFourSquare(e))}},{key:"chamaApiFourSquare",value:function(e){var t=this;fetch("https://api.foursquare.com/v2/venues/"+e.squareId+"?&client_id=RPG2KU5WWCUL345BGVBOVBI2UYVKNSRNHCTPOT0LVDRVIZFK&client_secret=WPVUMYBEEB1MS0HS4AWOY44WIA00CN4UG5DVVQZ0PT0POK2B&v=20131212").then(function(n){return n.json().then(function(n){if(200!==n.meta.code){var o="<div><strong>"+e.title+"</strong></div></br>",a=n.meta.errorDetail;return t.state.infoWindow.setContent(o+"<div> N\xe3o foi poss\xedvel acessar a API do foursquare.<br> <br> <code>Erro: "+a+" </code></div>")}if(void 0!=n.response.venue){o='<div style="font-size:18px"><b>'+e.title+"</b></div>";var i="<div> <b>Categoria</b>: "+n.response.venue.categories[0].pluralName+"</div>",r="<div> <b>Endere\xe7o:</b> "+(void 0==n.response.venue.location.address?"Rua sem nome":n.response.venue.location.address)+"</div>",s="<div> <b>Gostaram do lugar:</b> "+(void 0==n.response.venue.likes.summary?"Sem informa\xe7\xe3o :(":n.response.venue.likes.summary)+"</div>",c="<div> <b>Telefone:</b> "+(void 0==n.response.venue.contact.formattedPhone?"Sem telefone":n.response.venue.contact.formattedPhone)+"</div>";return t.state.infoWindow.setContent(o+"<br>"+i+r+s+c+"<br><div><code> Elaborado com Api do 4Square</code></div>")}})}).catch(function(e){return window.alert(e)})}},{key:"createScript",value:function(e){var t=window.document.getElementsByTagName("script")[0],n=window.document.createElement("script");n.src=e,n.async=!0,n.defer=!0,n.onerror=function(){alert("Erro ao carregar o mapa, verifique novamente.")},t.parentNode.insertBefore(n,t)}}]),t}(o.Component),g=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function b(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}r.a.render(a.a.createElement(w,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");g?(function(e,t){fetch(e).then(function(n){var o=n.headers.get("content-type");404===n.status||null!=o&&-1===o.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):b(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):b(t,e)})}}()},8:function(e,t,n){}},[[10,2,1]]]);
//# sourceMappingURL=main.ab1bf79e.chunk.js.map